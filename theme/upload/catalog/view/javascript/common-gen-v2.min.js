function getURLVar(a){let value=[];let query=String(document.location).split("?");if(query[1]){let part=query[1].split("&");for(i=0;i<part.length;i++){let data=part[i].split("=");if(data[0]&&data[1]){value[data[0]]=data[1]}}if(value[a]){return value[a]}else{return""}}}$(document).ready(function(){$(".text-danger").each(function(){let element=$(this).parent().parent();if(element.hasClass("form-group")){element.addClass("has-error")}});$("#form-currency").find(".currency-select").on("click",function(a){a.preventDefault();$("#form-currency").find('input[name="code"]').val($(this).attr("name"));$("#form-currency").trigger("submit")});$("#form-language").find(".language-select").on("click",function(a){a.preventDefault();$("#form-language").find('input[name="code"]').val($(this).attr("name"));$("#form-language").trigger("submit")});let typingTimer;$('#search-gen input[name="search"]').on("input",function(){let url=$("base").attr("href")+"index.php?route=product/search_gen";let value=$('header #search-gen input[name="search"]').val();clearTimeout(typingTimer);if(value&&value.length>1){url+="&search="+encodeURIComponent(value);typingTimer=setTimeout(function(){$.ajax({url:url,dataType:"json",beforeSend:function(){$("#search-gen").append('<span class="spinner-search"></span>')},success:function(a){if(a.success){let html='<ul class="list-group">';$.each(a.data,function(b,c){html+='<a class="list-group-item" href="'+c.href+'">';html+='<img class="img-thumbnail img-responsive img-rounded" src="'+c.thumb+'" alt="'+c.name+'">';html+="&nbsp;<span>"+c.name+"</span>";html+="</a>"});html+="</ul>";$("#search-response").html(html)}else{$("#search-response").children().remove()}},complete:function(){$(".spinner-search").remove()}})},1000)}else{$("#search-response").children().remove()}}).on("keydown",function(a){if(a.keyCode===13){$('header #search-gen input[name="search"]').trigger("input")}});if($(window).width()<768){$("#btn-search-open").on("click",function(){$(this).addClass("active");$("#btn-search-close").removeClass("active");$(this).next().toggle("slow")});$("#btn-search-close").on("click",function(){$(this).addClass("active");$("#btn-search-open").removeClass("active");$(this).parent().toggle("slow")})}$("#menu .dropdown-menu").each(function(){let menu=$("#menu").offset();let dropdown=$(this).parent().offset();let i=(dropdown.left+$(this).outerWidth())-(menu.left+$("#menu").outerWidth());if(i>0){$(this).css("margin-left","-"+(i+10)+"px")}});$("#list-view").on("click",function(){$("#content .product-grid > .clearfix").remove();$("#content .row > .product-grid").attr("class","product-layout product-list col-xs-12");$("#grid-view").removeClass("active");$("#list-view").addClass("active");localStorage.setItem("display","list")});$("#grid-view").on("click",function(){let cols=$("#column-right, #column-left").length;if(cols===2){$("#content .product-list").attr("class","product-layout product-grid col-lg-6 col-md-6 col-sm-12 col-xs-12")}else{if(cols===1){$("#content .product-list").attr("class","product-layout product-grid col-lg-4 col-md-4 col-sm-6 col-xs-12")}else{$("#content .product-list").attr("class","product-layout product-grid col-lg-4 col-md-4 col-sm-6 col-xs-12")}}$("#list-view").removeClass("active");$("#grid-view").addClass("active");localStorage.setItem("display","grid")});if(localStorage.getItem("display")=="list"){$("#list-view").trigger("click");$("#list-view").addClass("active")}else{$("#grid-view").trigger("click");$("#grid-view").addClass("active")}$(document).on("keydown",'#collapse-checkout-option input[name="email"], #collapse-checkout-option input[name="password"]',function(a){if(a.keyCode==13){$("#collapse-checkout-option #button-login").trigger("click")}});$('[data-toggle="tooltip"]').tooltip({container:"body"});$(document).ajaxStop(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})});if($(window).width()<768){$("#mobile-menu-open").on("click",function(){$("#menu-left .menu-left-container").toggle("slow")});$("#menu-left #mobile-menu-close").on("click",function(){$("#menu-left .menu-left-container").toggle("slow")});$("#menu-left .menu-left-container .top-category").on("click",function(a){a.preventDefault();if($(this).hasClass("active")){$(this).removeClass("active");$(this).next(".menu-content").hide()}else{$(this).addClass("active");$(this).next(".menu-content").show()}})}else{$("#menu-left").on("mouseover",function(){$("#content").css({opacity:"0.4",filter:"blur(0.5px)"})}).on("mouseleave",function(){$("#content").css({opacity:"1",filter:"blur(0)"})})}$(window).on("scroll",function(){if($(window).scrollTop()>0&&!$("#scroll-to-top").hasClass("hidden")){$("#scroll-to-top").show()}else{$("#scroll-to-top").hide()}});$("#scroll-to-top").on("click",function(){$("html, body").animate({scrollTop:0},"slow")})});const cart={add:function(a,b){$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:"product_id="+a+"&quantity="+(typeof(b)!="undefined"?b:1),dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(c){$(".alert-dismissible, .text-danger").remove();if(c.redirect){location=c.redirect}if(c.success){$("#content").parent().before('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> '+c.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>');setTimeout(function(){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+c.total+"</span>")},100);$("#cart > ul").load("index.php?route=common/cart/info ul li")}},error:function(e,c,d){alert(d+"\r\n"+e.statusText+"\r\n"+e.responseText)}})},update:function(a,b){$.ajax({url:"index.php?route=checkout/cart/edit",type:"post",data:"key="+a+"&quantity="+(typeof(b)!="undefined"?b:1),dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(c){setTimeout(function(){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+c.total+"</span>")},100);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart > ul").load("index.php?route=common/cart/info ul li")}},error:function(e,c,d){alert(d+"\r\n"+e.statusText+"\r\n"+e.responseText)}})},remove:function(a){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+a,dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(b){setTimeout(function(){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+b.total+"</span>")},100);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart > ul").load("index.php?route=common/cart/info ul li")}},error:function(d,b,c){alert(c+"\r\n"+d.statusText+"\r\n"+d.responseText)}})}};const voucher={add:function(){},remove:function(a){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+a,dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(b){setTimeout(function(){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+b.total+"</span>")},100);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart > ul").load("index.php?route=common/cart/info ul li")}},error:function(d,b,c){alert(c+"\r\n"+d.statusText+"\r\n"+d.responseText)}})}};const wishlist={add:function(a){$.ajax({url:"index.php?route=account/wishlist/add",type:"post",data:"product_id="+a,dataType:"json",success:function(b){$(".alert-dismissible").remove();if(b.redirect){location=b.redirect}if(b.success){$("#content").parent().before('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> '+b.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>')}$("#wishlist-total span").html(b.total);$("#wishlist-total").attr("title",b.total)},error:function(d,b,c){alert(c+"\r\n"+d.statusText+"\r\n"+d.responseText)}})},remove:function(){}};const compare={add:function(a){$.ajax({url:"index.php?route=product/compare/add",type:"post",data:"product_id="+a,dataType:"json",success:function(b){$(".alert-dismissible").remove();if(b.success){$("#content").parent().before('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> '+b.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>');$("#compare-total").html(b.total)}},error:function(d,b,c){alert(c+"\r\n"+d.statusText+"\r\n"+d.responseText)}})},remove:function(){}};$(document).delegate(".agree","click",function(a){a.preventDefault();$("#modal-agree").remove();let element=this;$.ajax({url:$(element).attr("href"),type:"get",dataType:"html",success:function(b){html='<div id="modal-agree" class="modal">';html+='  <div class="modal-dialog">';html+='    <div class="modal-content">';html+='      <div class="modal-header">';html+='        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>';html+='        <h4 class="modal-title">'+$(element).text()+"</h4>";html+="      </div>";html+='      <div class="modal-body">'+b+"</div>";html+="    </div>";html+="  </div>";html+="</div>";$("body").append(html);$("#modal-agree").modal("show")}})});(function(a){a.fn.autocomplete=function(b){return this.each(function(){this.timer=null;this.items=new Array();a.extend(this,b);a(this).attr("autocomplete","off");a(this).on("focus",function(){this.request()});a(this).on("blur",function(){setTimeout(function(c){c.hide()},200,this)});a(this).on("keydown",function(c){switch(c.keyCode){case 27:this.hide();break;default:this.request();break}});this.click=function(c){c.preventDefault();value=a(c.target).parent().attr("data-value");if(value&&this.items[value]){this.select(this.items[value])}};this.show=function(){let pos=a(this).position();a(this).siblings("ul.dropdown-menu").css({top:pos.top+a(this).outerHeight(),left:pos.left});a(this).siblings("ul.dropdown-menu").show()};this.hide=function(){a(this).siblings("ul.dropdown-menu").hide()};this.request=function(){clearTimeout(this.timer);this.timer=setTimeout(function(c){c.source(a(c).val(),a.proxy(c.response,c))},200,this)};this.response=function(c){html="";if(c.length){for(i=0;i<c.length;i++){this.items[c[i]["value"]]=c[i]}for(i=0;i<c.length;i++){if(!c[i]["category"]){html+='<li data-value="'+c[i]["value"]+'"><a href="#">'+c[i]["label"]+"</a></li>"}}let category=new Array();for(i=0;i<c.length;i++){if(c[i]["category"]){if(!category[c[i]["category"]]){category[c[i]["category"]]=new Array();category[c[i]["category"]]["name"]=c[i]["category"];category[c[i]["category"]]["item"]=new Array()}category[c[i]["category"]]["item"].push(c[i])}}for(i in category){html+='<li class="dropdown-header">'+category[i]["name"]+"</li>";for(j=0;j<category[i]["item"].length;j++){html+='<li data-value="'+category[i]["item"][j]["value"]+'"><a href="#">&nbsp;&nbsp;&nbsp;'+category[i]["item"][j]["label"]+"</a></li>"}}}if(html){this.show()}else{this.hide()}a(this).siblings("ul.dropdown-menu").html(html)};a(this).after('<ul class="dropdown-menu"></ul>');a(this).siblings("ul.dropdown-menu").delegate("a","click",a.proxy(this.click,this))})}})(window.jQuery);